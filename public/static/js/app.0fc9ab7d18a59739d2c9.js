webpackJsonp([1],{0:function(e,t){},Bfcf:function(e,t){},E51W:function(e,t){},Ix4Z:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("7+uW"),o={name:"DHeader",props:{title:{type:String,default:"Controller Center"},icon:{type:Boolean,default:null}},data:function(){return{date:""}},methods:{back:function(){this.$emit("back")},getTime:function(){var e=this;window.getTime=function(){var t=new Date,n=e.appendZeroIfLessThanTen(t.getHours()),i=e.appendZeroIfLessThanTen(t.getMinutes()),o=e.appendZeroIfLessThanTen(t.getSeconds());e.date=n+":"+i+":"+o,window.setTimeout(window.getTime,1e3)},window.getTime()},appendZeroIfLessThanTen:function(e){return e<10?"0"+e:e}},mounted:function(){this.getTime()}},s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("mu-appbar",{staticClass:"dong-header",attrs:{title:this.title}},[t("mu-icon-button",{directives:[{name:"show",rawName:"v-show",value:this.icon,expression:"icon"}],attrs:{slot:"left",icon:"keyboard_arrow_left"},on:{click:this.back},slot:"left"}),this._v(" "),t("div",{attrs:{slot:"right"},slot:"right"},[this._v(this._s(this.date))])],1)},staticRenderFns:[]};var a=n("VU/8")(o,s,!1,function(e){n("Ix4Z")},null,null).exports,r=n("DmT9"),l=n.n(r)()("/");l.on("connect",function(){console.log("连接服务器成功!"),bus.connected=!0}),l.on("message",function(e){if(console.log("服务器发来消息:"+e),"新设备"==e)bus.lampList.push({id:123,name:"客厅顶灯",voltage:3.2,red:12,green:12,blue:12,PIR:!0,sensor:1023,open:!0});else if('{"光感亮度": 250}'==e){var t=JSON.parse(e);console.log(t.光感亮度)}else'{"sensor" : "GY", "type" : "sunrise"}'==e&&console.log("白天到了!!!!!")});var c={openLight:function(){console.log("你想开灯?"),l.send("嘤嘤嘤")},closeLight:function(){console.log("你要关灯!")},changeBrightness:function(e){console.log("你把亮度调整为 "+e)},changeRed:function(e){console.log("你把红灯调整为:"+e)},changeBlue:function(e){console.log("调整蓝灯!")},changeGreen:function(e){console.log("调绿的呢!")},complete:function(){console.log("你点击了完成按钮!")},changeName:function(e){console.log("你把名字改成"+e+"了")}},u=window.bus=new i.default({data:{connected:!1,lampList:[{id:123,name:"客厅顶灯",voltage:3.2,red:12,green:12,blue:12,PIR:!0,sensor:1023,open:!0,brightness:20},{id:456,name:"卧室灯",voltage:2.2}],sensorList:[]},watch:{lampList:function(e){this.$emit("updateList",e)}},methods:{getTime:function(){var e=new Date;return{h:e.getHours(),m:e.getMinutes()}},dispatch:function(e){try{var t=JSON.parse(e);this.$emit("onMessage",t)}catch(e){}console.log(e)}},created:function(){var e=this;for(var t in console.log("bus.startUp()!"),l.onmessage=function(t){return e.dispatch(t.data)},l.onopen=function(){e.connected=!0,e.$emit("connected")},l.onclose=function(){e.connected=!1,e.$emit("disconnect")},c)this.$on(t,c[t])}}),d={components:{DHeader:a},name:"App",data:function(){return{title:"",icon:!1}},methods:{back:function(){this.$router.go(-1)}},mounted:function(){var e=this;u.$on("icon",function(t){return e.icon=t})}},m={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("d-header",{attrs:{icon:this.icon},on:{back:this.back}}),this._v(" "),t("router-view")],1)},staticRenderFns:[]};var f=n("VU/8")(d,m,!1,function(e){n("zUeT")},null,null).exports,h=n("/ocq"),p={name:"Battery",props:{color:{type:String,default:null},size:{type:Number,default:7},percent:{type:Number,default:50},width:{type:Number,default:27}},data:function(){return{voltage:20}},computed:{batteryStyle:function(){return{height:this.size+4+"px","border-radius":(this.size?(this.size+4)/2:"")+"px",width:this.width+"px"}},linearStyle:function(){return{height:this.size+"px","background-color":this.getColor(),"border-radius":(this.size?this.size/2:"")+"px"}},coverStyle:function(){return{height:this.size+"px","background-color":"white","border-bottom-left-radius":(this.size?this.size/2:"")+"px","border-top-left-radius":(this.size?this.size/2:"")+"px",width:(100-this.percent)/100*this.width-4+"px"}}},methods:{getColor:function(){return this.color?this.color:this.percent<=20?"red":"#47c201"}}},v={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"battery",style:e.batteryStyle},[n("div",{staticClass:"battery-cover",style:e.coverStyle}),e._v(" "),n("div",{staticClass:"battery-inner",style:e.linearStyle})]),e._v(" "),n("span",[e._v(e._s(e.percent)+"%")])])},staticRenderFns:[]};var g=n("VU/8")(p,v,!1,function(e){n("sjDY")},null,null).exports,y={components:{Battery:g},name:"LampCard",props:["lamp"],data:function(){return{}},methods:{configLamp:function(){this.$router.push("/configLamp/"+this.lamp.id)}}},b={render:function(){var e=this.$createElement,t=this._self._c||e;return t("mu-card",[t("mu-card-header",{attrs:{title:this.lamp.name,titleClass:"lamp-name"}},[t("i",{staticClass:"fa fa-lightbulb-o fa-5x",staticStyle:{position:"absolute",left:"70%"}}),this._v(" "),t("battery",{attrs:{slot:"default",percent:this.lamp.voltage?parseInt(this.lamp.voltage/3.3*100):100},slot:"default"})],1),this._v(" "),t("mu-card-actions",[t("mu-raised-button",{attrs:{label:"遥控",primary:""},on:{click:this.configLamp}})],1)],1)},staticRenderFns:[]};var x=n("VU/8")(y,b,!1,function(e){n("Y69i")},null,null).exports,w={components:{Battery:g},name:"SensorCard",props:["sensor"],data:function(){return{voltage:.6,name:"Sensor2"}},computed:{},methods:{configSensor:function(){this.$router.push("/configSensor/"+this.sensor.id)}}},_={render:function(){var e=this.$createElement,t=this._self._c||e;return t("mu-card",[t("mu-card-header",{attrs:{title:this.sensor.name,titleClass:"sensor-name"}},[t("i",{staticClass:"fa fa-tag fa-4x",staticStyle:{position:"absolute",left:"70%"}}),this._v(" "),t("battery",{attrs:{slot:"default",percent:parseInt(this.sensor.voltage/3.3*100)},slot:"default"})],1),this._v(" "),t("mu-card-actions",[t("mu-raised-button",{attrs:{label:"遥控",primary:""},on:{click:this.configSensor}})],1)],1)},staticRenderFns:[]};var k=n("VU/8")(w,_,!1,function(e){n("aI6T")},null,null).exports,C={components:{Battery:g},name:"configLamp",props:{id:{type:String,default:"1"}},data:function(){return{previewColor:{"font-weight":"500","font-size":"2em!import"},modify:!1,timer2:!1,alertTime2:"",name:"灯",waiting:!1,batteryLevel:50,red:0,green:0,blue:0,open:!1,slider:50}},watch:{open:function(e){e?u.$emit("openLight"):u.$emit("closeLight")},slider:function(){var e=this;this.waiting||(this.waiting=!0,setTimeout(function(){e.waiting=!1,u.$emit("changeBrightness",e.slider)},200))},name:function(e){u.$emit("changeName",e)}},computed:{mixedColor:function(){return"rgb("+this.red+", "+this.green+", "+this.blue+")"}},methods:{complete:function(){u.$emit("complete"),this.$router.go(-1)},changeRed:function(e){this.red=e,u.$emit("changeRed",this.red)},changeBlue:function(e){this.blue=e,u.$emit("changeBlue",this.blue)},changeGreen:function(e){this.green=e,u.$emit("changeGreen",this.green)},switchAlarm:function(){this.timer2=!this.timer2},changeBrightness:function(e){console.log(e)},modifyName:function(){var e=this;this.modify=!this.modify,this.$nextTick(function(){return e.$refs.textField.focus()})}},mounted:function(){var e=this;u.$emit("icon",!0),u.lampList.forEach(function(t){t.id==e.id&&(e.batteryLevel=Math.floor(t.voltage/3.3*100),e.slider=t.brightness,e.red=t.red,e.blue=t.blue,e.green=t.green,e.open=t.open,e.name=t.name)})},destroyed:function(){u.$emit("icon",!1)}},L={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("mu-list",[n("mu-list-item",{attrs:{describeText:"名字"},on:{click:e.modifyName}},[n("battery",{attrs:{slot:"right",percent:e.batteryLevel},slot:"right"}),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:!e.modify,expression:"!modify"}],staticStyle:{"font-size":"larger"}},[e._v(e._s(e.name))]),e._v(" "),n("mu-text-field",{directives:[{name:"show",rawName:"v-show",value:e.modify,expression:"modify"}],ref:"textField",nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.modify=!1}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),n("mu-divider"),e._v(" "),n("mu-list-item",{attrs:{title:"开关"},on:{click:function(t){e.open=!e.open}}},[n("mu-switch",{attrs:{slot:"right"},on:{change:function(t){e.open=!e.open}},slot:"right",model:{value:e.open,callback:function(t){e.open=t},expression:"open"}})],1),e._v(" "),n("mu-list-item",{attrs:{title:"闹钟",describeText:"每天定时亮起"}},[n("mu-switch",{attrs:{slot:"right"},on:{change:e.switchAlarm},slot:"right",model:{value:e.timer2,callback:function(t){e.timer2=t},expression:"timer2"}}),e._v(" "),n("mu-time-picker",{directives:[{name:"show",rawName:"v-show",value:e.timer2,expression:"timer2"}],attrs:{hintText:"选择时间",value:e.alertTime2}})],1),e._v(" "),n("mu-list-item",{staticClass:"brightnessConfig",attrs:{describeText:e.waiting?"正在调整...":e.slider+""}},[n("div",{staticStyle:{position:"relative",height:"50px"}},[n("i",{staticClass:"fa fa-sun-o",staticStyle:{left:"10px",top:"34px"}}),e._v(" "),n("mu-slider",{staticStyle:{top:"30px",left:"20%",position:"absolute",display:"block",width:"200px"},attrs:{step:2,disabled:!e.open},on:{change:e.changeBrightness},model:{value:e.slider,callback:function(t){e.slider=t},expression:"slider"}}),e._v(" "),n("i",{staticClass:"fa fa-sun-o fa-2x",staticStyle:{right:"10px",top:"27px"}})],1)]),e._v(" "),n("mu-list-item",{staticClass:"brightnessConfig",attrs:{describeText:"调整色彩(左侧预览)"}},[n("mu-avatar",{attrs:{slot:"leftAvatar",icon:":fa fa-lightbulb-o fa-2x",backgroundColor:"white",iconSize:40,color:e.mixedColor},slot:"leftAvatar"}),e._v("\n      red value:"+e._s(e.red)+"\n      "),n("mu-slider",{attrs:{step:2,disabled:!e.open},on:{change:e.changeRed},model:{value:e.red,callback:function(t){e.red=t},expression:"red"}}),e._v("\n      green value:"+e._s(e.green)+"\n      "),n("mu-slider",{attrs:{step:2,disabled:!e.open},on:{change:e.changeGreen},model:{value:e.green,callback:function(t){e.green=t},expression:"green"}}),e._v("\n      blue value:"+e._s(e.blue)+"\n      "),n("mu-slider",{attrs:{step:2,disabled:!e.open},on:{change:e.changeBlue},model:{value:e.blue,callback:function(t){e.blue=t},expression:"blue"}})],1)],1),e._v(" "),n("div",{staticStyle:{"text-align":"center"}},[n("mu-raised-button",{attrs:{label:"完成",primary:""},on:{click:e.complete}})],1)],1)},staticRenderFns:[]};var T=n("VU/8")(C,L,!1,function(e){n("z/7L")},null,null).exports,$=n("mvHQ"),S=n.n($),I=n("XLwt"),N={name:"configSensor",components:{Battery:g},props:{batteryLevel:{type:Number,default:50}},data:function(){return{name:"传感器",modify:!1,open:!0,interval:1,modifingInterval:!1,option:{xAxis:{type:"time",splitLine:{show:!1}},yAxis:{type:"value"},series:[{data:[],type:"line"}]},op:{series:[{data:[]}]}}},watch:{interval:function(){this.open&&this.axios.post(u.host+"/sensorStatus?id="+this.id,S()({cmd:"setInterval",interval:this.interval}))}},methods:{modifyName:function(){var e=this;this.modify=!this.modify,this.$nextTick(function(){return e.$refs.textField.focus()})},modifyInterval:function(){var e=this;this.modifingInterval=!this.modifingInterval,this.$nextTick(function(){return e.$refs.intervalTextField.focus()})}},mounted:function(){var e=this;window.myChart=I.init(this.$refs.mainChart),myChart.setOption(this.option),window.aaa=function(){myChart.hideLoading(),e.op.series[0].data.push(Math.random()),myChart.setOption(e.op)},window.aaa()}},z={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("mu-list",[n("mu-list-item",{attrs:{describeText:"名字"},on:{click:e.modifyName}},[n("battery",{attrs:{slot:"right",percent:e.batteryLevel},slot:"right"}),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:!e.modify,expression:"!modify"}],staticStyle:{"font-size":"larger"}},[e._v(e._s(e.name))]),e._v(" "),n("mu-text-field",{directives:[{name:"show",rawName:"v-show",value:e.modify,expression:"modify"}],ref:"textField",nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.modify=!1}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),n("mu-divider"),e._v(" "),n("mu-list-item",{attrs:{title:"开关"},on:{click:function(t){e.open=!e.open}}},[n("mu-switch",{attrs:{slot:"right"},on:{change:function(t){e.open=!e.open}},slot:"right",model:{value:e.open,callback:function(t){e.open=t},expression:"open"}})],1),e._v(" "),n("mu-list-item",{attrs:{title:"感应间隔时间"},on:{click:e.modifyInterval}},[n("span",{directives:[{name:"show",rawName:"v-show",value:!e.modifingInterval,expression:"!modifingInterval"}],staticStyle:{"font-size":"larger"}},[e._v(e._s(e.interval+"s"))]),e._v(" "),n("mu-text-field",{directives:[{name:"show",rawName:"v-show",value:e.modifingInterval,expression:"modifingInterval"}],ref:"intervalTextField",nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.modifingInterval=!1}},model:{value:e.interval,callback:function(t){e.interval=t},expression:"interval"}})],1),e._v(" "),n("mu-divider"),e._v(" "),n("div",{ref:"mainChart",staticStyle:{width:"100%",height:"400px"}})],1)],1)},staticRenderFns:[]};var E=n("VU/8")(N,z,!1,function(e){n("Bfcf")},null,null).exports,B={components:{ConfigSensor:E,ConfigLamp:T,SensorCard:k,Battery:g,LampCard:x}},R={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("config-sensor")],1)},staticRenderFns:[]},F=n("VU/8")(B,R,!1,null,null,null).exports,D={components:{SensorCard:k,LampCard:x},data:function(){return{lampList:[],sensorList:[]}},computed:{isEmpty:function(){return this.lampList.length+this.sensorList.length==0}},methods:{getListData:function(){this.lampList=u.lampList}},mounted:function(){var e=this;this.getListData(),u.$on("updateList",function(t){return e.lampList=t})}},U={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{"text-align":"center"}},[this.isEmpty?t("p",[this._v("emmm。没有任何设备接入~请尝试刷新")]):t("div",[this._l(this.lampList,function(e,n){return t("div",{key:n,staticClass:"lamp"},[t("lamp-card",{attrs:{lamp:e}})],1)}),this._v(" "),this._l(this.sensorList,function(e,n){return t("div",{key:n,staticClass:"sensor"},[t("sensor-card",{attrs:{sensor:e}})],1)})],2)])},staticRenderFns:[]};var V=n("VU/8")(D,U,!1,function(e){n("QOuv")},null,null).exports;i.default.use(h.a);var O=new h.a({routes:[{path:"/test",name:"test",component:F},{path:"/",name:"index",component:V},{path:"/configLamp/:id",component:T,props:!0},{path:"/configSensor/:id",component:E,props:!0}]}),A=n("u64Q"),M=n.n(A),G=(n("E51W"),n("kVx/"),n("mtWM")),H=n.n(G);i.default.use(M.a),i.default.config.productionTip=!1,i.default.prototype.getCookie=function(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?t[2]:null},i.default.prototype.axios=H.a,i.default.prototype.setCookie=function(e,t,n){var i=new Date;i.setDate(i.getDate()+n),document.cookie=e+"="+escape(t)+(null==n?"":";expires="+i.toGMTString())},i.default.prototype.delCookie=function(e){var t=new Date;t.setTime(t.getTime()-1);var n=getCookie(e);null!=n&&(document.cookie=e+"="+n+";expires="+t.toGMTString())},i.default.prototype.bus=u,new i.default({el:"#app",router:O,components:{App:f},template:"<App/>"})},QOuv:function(e,t){},Y69i:function(e,t){},aI6T:function(e,t){},"kVx/":function(e,t){},sjDY:function(e,t){},"z/7L":function(e,t){},zUeT:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.0fc9ab7d18a59739d2c9.js.map